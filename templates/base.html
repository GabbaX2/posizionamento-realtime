<!DOCTYPE html>
<html lang="it" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Sensor Placement Validator{% endblock %}</title>

    <script src="https://cdn.tailwindcss.com"></script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        kin: {
                            base: '#0f1021',      // Sfondo principale
                            card: '#161831',      // Sfondo card
                            border: '#2e3054',    // Bordi
                            primary: '#4f46e5',   // Indigo
                            secondary: '#818cf8', // Light Indigo
                        }
                    },
                    backgroundImage: {
                        'kin-gradient': 'radial-gradient(circle at 50% 0%, #2e1065 0%, #0f1021 70%)'
                    }
                }
            }
        }
    </script>

    <style>
        /* BASE STYLES */
        body {
            background-color: #0f1021;
            background-image: radial-gradient(circle at 50% -20%, #2e1065 0%, #0f1021 60%);
            background-repeat: no-repeat;
            background-attachment: fixed;
            color: #e2e8f0;
            font-family: 'Inter', sans-serif;
        }

        /* --- COMPATIBILITY LAYER (CRITICO PER IL TUO JS) ---
           Queste regole permettono al tuo JS originale (che usa classi Bootstrap)
           di funzionare all'interno del layout Tailwind.
        */
        .d-none { display: none !important; }
        .d-block { display: block !important; }
        .d-flex { display: flex !important; }

        /* Adattamento Modals Bootstrap al tema scuro */
        .modal-content { background-color: #161831 !important; border: 1px solid #2e3054 !important; color: white !important; }
        .modal-header { border-bottom: 1px solid #2e3054 !important; }
        .modal-footer { border-top: 1px solid #2e3054 !important; }
        .btn-close { filter: invert(1) grayscale(100%) brightness(200%); } /* Icona X bianca */

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #0f1021; }
        ::-webkit-scrollbar-thumb { background: #2e3054; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #4f46e5; }
    </style>
</head>
<body class="min-h-screen flex flex-col antialiased selection:bg-indigo-500 selection:text-white">

    <nav class="sticky top-0 z-50 w-full border-b border-white/10 bg-[#0f1021]/80 backdrop-blur-md">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex h-16 items-center justify-between">
                <div class="flex-shrink-0">
                    <a href="{{ url_for('index') }}" class="flex items-center gap-2 group decoration-0">
                        <span class="text-2xl font-bold text-white tracking-tight">Kin<span class="text-indigo-500">.ai</span></span>
                    </a>
                </div>

                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <a href="{{ url_for('index') }}" class="text-gray-300 hover:text-white hover:bg-white/5 px-3 py-2 rounded-md text-sm font-medium transition-all no-underline">
                            Home
                        </a>
                        <a href="{{ url_for('upload_page') }}" class="text-gray-300 hover:text-white hover:bg-white/5 px-3 py-2 rounded-md text-sm font-medium transition-all no-underline">
                            Carica Riferimento
                        </a>
                        <a href="{{ url_for('validation_page') }}" class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-full text-sm font-medium transition-all shadow-lg shadow-indigo-500/30 no-underline">
                            Validazione Live
                        </a>
                    </div>
                </div>

                <div class="-mr-2 flex md:hidden">
                    <button type="button" class="inline-flex items-center justify-center rounded-md p-2 text-gray-400 hover:bg-gray-700 hover:text-white focus:outline-none" onclick="document.getElementById('mobile-menu').classList.toggle('hidden')">
                        <i class="bi bi-list text-2xl"></i>
                    </button>
                </div>
            </div>
        </div>

        <div class="hidden md:hidden bg-[#161831] border-b border-white/10" id="mobile-menu">
            <div class="space-y-1 px-2 pb-3 pt-2 sm:px-3">
                <a href="{{ url_for('index') }}" class="text-gray-300 block rounded-md px-3 py-2 text-base font-medium">Home</a>
                <a href="{{ url_for('upload_page') }}" class="text-gray-300 block rounded-md px-3 py-2 text-base font-medium">Carica</a>
                <a href="{{ url_for('validation_page') }}" class="bg-indigo-600 text-white block rounded-md px-3 py-2 text-base font-medium">Validazione</a>
            </div>
        </div>
    </nav>

    <main class="flex-grow w-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        {% block content %}{% endblock %}
    </main>

    <footer class="border-t border-white/10 bg-[#0f1021] py-8 mt-auto">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <p class="text-slate-500 text-sm">
                &copy; 2025 Kin.ai Sensor Validator.
            </p>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

    {% block scripts %}{% endblock %}
</body>
</html>